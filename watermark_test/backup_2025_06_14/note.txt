
pip install git+https://github.com/VLL-HD/FrEIA.git
python -m pip install --upgrade pip



(안될경우)
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process 

(동작실행)
.venv\Scripts\Activate

(gpu)
pip uninstall torch torchvision torchaudio -y
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121


pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu128


| 지표                        | 범위 (이상적)   | 뜻                            |
| ------------------------- | ---------- | ---------------------------- |
| **PSNR**                  | → ∞ dB     | 화질(왜곡). 30 dB↑ 이면 사람이 잘 못 느낌 |
| **SSIM**                  | 0 → 1      | 구조적 유사도 (1 = 동일)             |
| **Bit Accuracy**          | 0 → 1      | 삽입 비트 중 정확히 복호된 비율           |
| **BER**                   | 1-Accuracy | 비트 오류율                       |
| **NC**                    | 0 → 1      | 패턴 상관계수(1 = 완벽)              |
| **IF(RMSE)**              | 0 → ∞      | 원본-스테고 평균 제곱근 오차 (0 = 무왜곡)   |
| **JPEG90-PSNR / GN-PSNR** | 높을수록 강인    | 압축·노이즈 후 화질                  |


'''
| 목적               | 파라미터             | 가이드라인                      | 효과                                          |
| ---------------- | ---------------- | -------------------------- | ------------------------------------------- |
| **워터마크 강도 ↑**    | `WM_STRENGTH`    | `0.05` → **`0.3 ~ 0.6`** ① | - 정확도 급상승  - PSNR·SSIM ↓ (40 dB → 30 dB 근처) |
| **왜곡 최소화**       | `LAM_Z` (z-loss) | **`0.2 ~ 0.3`** ②          | - 삽입 시 z 가 0 근처로 묶여 화질↑                     |
| **Jacobian 안정화** | `LAM_J`          | **`0.5 ~ 1.5`** ③          | - 역변환 오류↓ → 추출 신뢰도↑                         |
| **표현력 확보**       | `BLOCKS`         | 20 → **`24 ~ 32`**         | - 모델 용량↑ → 노이즈 견딤↑                          |
| **수렴 보장**        | `EPOCHS`         | 10 → **`30 ~ 50`**         | - 강도가 커져도 PSNR 회복                           |

| PSNR (dB)    | 품질 등급          | 의미                    |
| ------------ | -------------- | --------------------- |
| **> 40 dB**  | 매우 우수 (거의 무손실) | 사람이 차이를 거의 느낄 수 없음    |
| **35–40 dB** | 우수             | 품질 저하 거의 없음           |
| **30–35 dB** | 양호             | 약간의 품질 저하 (대부분 허용 가능) |
| **28–30 dB** | 보통             | 워터마크 삽입이 눈에 띌 수 있음    |
| **< 28 dB**  | 저품질            | 시각적으로도 품질 저하가 확연함     |

| 지표       | 좋을수록       | 의미                              |
| -------- | ---------- | ------------------------------- |
| **PSNR** | ↑ 높을수록     | Stego 이미지가 원본과 유사함 (왜곡 적음)      |
| **SSIM** | ↑ 1에 가까울수록 | 구조적 유사도 (사람 눈 기준 품질)            |
| **ACC**  | ↑ 100%     | 워터마크 비트 추출 정확도 (100%면 완전 추출 성공) |
| **BER**  | ↓ 0%       | 워터마크 비트 오차율 (0%면 완벽 추출)         |
| **NC**   | ↑ 1        | 정답 비트와 추출 비트 간 상관관계 (1이면 완전 일치) |


| 공격                 | 설명                  | 파라미터 의미                               | 일반적 영향                       |
| ------------------ | ------------------- | ------------------------------------- | ---------------------------- |
| **JPEG**           | 손실 압축 포맷으로 품질 저하    | `JPEG_Q = [50~95]` (품질, 낮을수록 압축 강함)   | 블록 노이즈, 세부 손실                |
| **Gaussian Blur**  | 흐리게 만들기 (시각적 흐림 효과) | `GB_SIG = [2~7]` (σ 값이 커질수록 흐려짐)      | 경계 정보 손실                     |
| **Resize**         | 이미지 축소 후 복원         | `RS_SCALES = [0.5~0.9]` (작게 줄였다가 되돌림) | 픽셀 단순화, 디테일 손실               |
| **Crop**           | 중앙 부분만 자르고 리사이즈     | `CR_PCTS = [0.6~0.9]` (60%만 보존 등)     | 가장자리 정보 손실                   |
| **Gaussian Noise** | 랜덤 노이즈 추가           | `GN_SIGMA = [0.01~0.03]` (표준편차 σ)     | 무작위 점 찍힘 (salt\&pepper처럼 보임) |

| 지표       | 의미                                      | 좋은 범위 (이론적 이상)                        | 영향 받는 방식             |
| -------- | --------------------------------------- | ------------------------------------- | -------------------- |
| **PSNR** | 원본-복원 이미지 유사도 (dB 단위)                   | **> 30 dB** 이상 좋음<br>(25\~30: 수용 가능)  | **공격 강할수록 ↓**        |
| **SSIM** | 구조적 유사도 (0\~1)                          | **> 0.90** 이상 좋음<br>(0.85\~0.90: 괜찮음) | **공격 강할수록 ↓**        |
| **ACC**  | 비트 정확도 (정답과 일치율)                        | **= 1.00 (100%)**                     | **공격 강할수록 ↓**        |
| **BER**  | 비트 오류율 (1 - ACC)                        | **= 0.00 (0%)**                       | **공격 강할수록 ↑**        |
| **NC**   | Normalized Correlation (유사도 지표: -1\~+1) | **= +1.00**                           | **공격 강할수록 ↓ (또는 0)** |

이상적 반응 정리리
| 공격 유형        | PSNR/SSIM    | ACC       | BER  | NC                 | 코멘트             |
| ------------ | ------------ | --------- | ---- | ------------------ | --------------- |
| JPEG Q=95    | 거의 변화 없음     | 1.00      | 0.00 | +1.00              | 최상 품질. 잘 통과해야 함 |
| JPEG Q=50    | PSNR↓, SSIM↓ | 낮을 수 있음   | 높아짐  | 0 또는 음수 가능         | 견딜 수 있으면 강인함    |
| Blur σ=2\~7  | SSIM 빠르게 ↓   | ACC↓ BER↑ | NC↓  | 경계 정보 흐림으로 어려움     |                 |
| Resize 0.5   | PSNR↓        | ACC↓ BER↑ | NC↓  | 공간정보 왜곡 — 어려운 공격   |                 |
| Crop 60%     | PSNR↓        | ACC↓ BER↑ | NC↓  | 채널 중 일부 손실 — 최악 가능 |                 |
| Noise σ=0.01 | PSNR↓, SSIM↓ | ACC↓      | BER↑ | NC↓                | 랜덤이라 불안정성 유발    |
